/* HyperRushNet Unified Library v2.2 | (c) HyperRush | Features: DB, Favorites, Events, Theming */
!function(e){let t,r;const n="https://cdn.jsdelivr.net/gh/HyperRushNet/hyperrushnet.github.io/assets/json/games.json",o=async()=>t||r||(r=fetch(n).then(e=>e.ok?e.json():[]).then(e=>(t=e)).catch(()=>t=[])),a=e=>String(e).toLowerCase(),l="hrn_f",c=localStorage;e.hrn={db:{find:async(e={})=>{const r=await o();return r.filter(t=>Object.keys(e).every(r=>{const n=e[r];return!n||(Array.isArray(t[r])?t[r].some(e=>a(e)===a(n)):a(t[r])===a(n))}))},search:async e=>{const r=await o(),n=a(e.trim());return n?r.filter(e=>a(e.name).includes(n)||a(e.category).includes(n)||e.device&&e.device.some(e=>a(e).includes(n))).sort((e,t)=>{const r=a(e.name).indexOf(n),o=a(t.name).indexOf(n);return(r<0?99:r)-(o<0?99:o)}):[...r]},sort:async(e,t="name",r=!1)=>{const n=[...e||await o()].sort((e,r)=>a(e[t]).localeCompare(a(r[t])));return r?n.reverse():n},getMeta:async()=>{const e=await o();return{total:e.length,categories:[...new Set(e.map(e=>e.category))].sort(),devices:[...new Set(e.flatMap(e=>e.device||[]))].sort()}},all:async()=>[...await o()],random:async()=>{(await o());return t[Math.floor(Math.random()*t.length)]},toggleFav:e=>{let r=JSON.parse(c.getItem(l)||"[]");return e=+e,r.includes(e)?r=r.filter(t=>t!==e):r.push(e),c.setItem(l,JSON.stringify(r)),r},getFavs:async()=>{const e=JSON.parse(c.getItem(l)||"[]");return(await o()).filter(t=>e.includes(+t.number))}}};class s extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return["nr","provider"]}connectedCallback(){this.O=new IntersectionObserver(e=>{e[0].isIntersecting&&(this.I(),this.O.disconnect())}),this.O.observe(this)}async I(){const e=this.getAttribute("nr"),t=this.getAttribute("provider"),r="false"!==this.getAttribute("credits"),s="false"!==this.getAttribute("redirectblock");let i;if(t&&!e)i=t;else{const a=await o(),l=a.find(t=>Number(t.number)===Number(e)),d=t||"https://hyperrushnet.github.io";i=l?.link?d+l.link:d+"/games-1/bacon-may-die/"}const a=this.shadowRoot,d="var(--hrn-color,#4169E1)";a.innerHTML=`<style>.m{position:relative;background:#000;overflow:hidden;font-family:sans-serif;width:100%;height:100%}.f{width:100%;height:100%;border:none;display:block;opacity:0;transition:opacity .9s;z-index:1}.f.o{opacity:1}.l{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#000;z-index:99;gap:20px;transition:opacity .6s}.p{width:64px;height:64px;border:4px solid #0000;border-top-color:${d};border-right-color:${d};border-radius:50%;animation:s 1.2s linear infinite}.t{color:#fff;font-size:14px;opacity:.7;letter-spacing:1px;text-transform:uppercase;font-weight:700}@keyframes s{to{transform:rotate(360deg)}}.c{position:absolute;bottom:12px;right:16px;z-index:100;font-size:11px;color:#999;background:#000d;padding:4px 10px;border-radius:5px;text-transform:uppercase;animation:f 8s forwards;border:1px solid #333}.c a{color:${d};text-decoration:none;font-weight:700}@keyframes f{0%,85%{opacity:1}100%{opacity:0;visibility:hidden}}</style><div class="m"><div class="l"><div class="p"></div><div class="t">Loading...</div></div>${r?'<div class="c">Powered by <a href="https://hyperrushnet.github.io/" target="_blank">HyperRush</a></div>':""}<iframe class="f" allow="autoplay;fullscreen;gamepad"></iframe></div>`;const p=a.querySelector("iframe");p.sandbox=`allow-scripts allow-same-origin allow-pointer-lock allow-forms ${s?"":"allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"}`,p.src=i,p.onload=()=>{p.classList.add("o"),this.dispatchEvent(new CustomEvent("game:ready",{detail:{id:e},bubbles:!0,composed:!0}));const t=a.querySelector(".l");t&&(t.style.opacity=0,setTimeout(()=>t.remove(),600))}}}customElements.define("hrn-game",s)}(window);
