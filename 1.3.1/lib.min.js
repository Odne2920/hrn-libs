(function(w){const d=document,ls=localStorage,u="https://cdn.jsdelivr.net/gh/HyperRushNet/hyperrushnet.github.io/assets/json/games.json",sI=["https://unpkg.com/lucide@latest"];sI.forEach(t=>{if(!d.querySelector(`script[src="${t}"]`)){const e=d.createElement("script");e.src=t,e.async=!0,d.head.appendChild(e)}});let db,fP;const fDb=async()=>db||fP||(fP=fetch(u).then(r=>r.ok?r.json():[]).then(data=>(db=data)).catch(()=>db=[]).finally(()=>fP=null),fP),low=s=>String(s).toLowerCase();w.hrn={db:{all:async()=>[...await fDb()],search:async(q)=>{const data=await fDb(),s=low(q.trim());return s?data.filter(g=>low(g.name).includes(s)||low(g.category).includes(s)||(g.device&&g.device.some(d=>low(d).includes(s)))).sort((a,b)=>(low(a.name).indexOf(s)<0?99:low(a.name).indexOf(s))-(low(b.name).indexOf(s)<0?99:low(b.name).indexOf(s))):[...data]}}};class P extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(t="load"){const e=this.getAttribute("accent")||"#4169E1",i="dark"===(this.getAttribute("theme")||"dark"),n=i?"#000":"#fff",r=i?"#fff":"#000",a=i?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)",o=this.getAttribute("card-size")||"220px",h=this.getAttribute("height")||"600px";let l=`<style>:host{display:block;position:relative;width:${this.getAttribute("width")||"100%"};height:${h};background:${n};color:${r};font-family:sans-serif;overflow:hidden;border:1px solid ${a}}.msg{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.ldr{width:40px;height:40px;border:2px solid ${r}22;border-top-color:${e};border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.w{position:relative;width:100%;height:100%;overflow-y:auto;overflow-x:hidden}.w.lock{overflow:hidden}.h{position:sticky;top:0;z-index:150;display:flex;justify-content:flex-end;padding:15px;pointer-events:none}.sh{display:flex;pointer-events:auto;box-shadow:0 4px 15px rgba(0,0,0,0.2)}.i{width:0;opacity:0;border:1px solid ${e};border-right:none;background:rgba(0,0,0,0.7);color:#fff;transition:.3s;outline:none;font-size:14px;backdrop-filter:blur(5px)}.sh.active .i{width:clamp(150px,25vw,250px);opacity:1;padding:0 15px}.tr{width:45px;height:45px;border:1px solid ${e};display:flex;align-items:center;justify-content:center;cursor:pointer;color:${e};background:rgba(0,0,0,0.5);transition:.2s;backdrop-filter:blur(5px)}.tr:hover{background:rgba(0,0,0,0.8);color:#fff}.g{display:grid;grid-template-columns:repeat(auto-fill,minmax(min(100%,${o}),1fr));width:100%;margin-top:-75px}.c{aspect-ratio:1/1;border:1px solid ${a};display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:.2s;text-align:center;padding:20px;margin:-0.5px}.c:hover{border-color:${e};z-index:5;background:${e}11}.ct{font-size:1.1rem;text-transform:uppercase;margin:0;font-weight:900}.cn{font-size:11px;margin-top:8px;color:${e};font-family:monospace;font-weight:700;opacity:.7}.ov{position:absolute;inset:0;z-index:1000;display:none;pointer-events:none}.ov.active{display:block}.sb{position:absolute;inset:0;background:#000;pointer-events:auto;display:flex;flex-direction:column}.cl{position:absolute;top:15px;right:15px;width:40px;height:40px;border:1px solid rgba(255,255,255,0.4);color:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;background:rgba(0,0,0,0.5);z-index:1100;transition:.2s;backdrop-filter:blur(5px)}.cl:hover{border-color:#ff4444;color:#ff4444;background:rgba(255,0,0,0.2)}.pc{width:100%;height:100%}hrn-game{width:100%!important;height:100%!important;display:block}</style>`;if(t==="load"){l+='<div class="msg"><div class="ldr"></div></div>';this.shadowRoot.innerHTML=l;this.checkDeps()}else{l+=`<div class="w" id="mw"><div class="h"><div class="sh" id="sw"><input type="text" class="i" id="si" placeholder="Search..."><div class="tr" id="st"><i data-lucide="search" style="width:18px"></i></div></div></div><div class="g" id="gg"></div><div class="ov" id="ov"><div class="sb"><button class="cl" id="gc"><i data-lucide="x" style="width:20px"></i></button><div class="pc" id="pc"></div></div></div></div>`;this.shadowRoot.innerHTML=l;this.initialize()}}checkDeps(){let t=0;const e=setInterval(()=>{if(w.lucide){clearInterval(e);this.render("ready")}else if(t>50){clearInterval(e);this.render("ready")}t++},100)}async initialize(){const s=this.shadowRoot;if(w.lucide)lucide.createIcons({attrs:{"stroke-width":2},nameAttr:"data-lucide",root:s});const gg=s.querySelector("#gg"),si=s.querySelector("#si"),sw=s.querySelector("#sw"),ov=s.querySelector("#ov"),pc=s.querySelector("#pc"),mw=s.querySelector("#mw"),pv=this.getAttribute("provider")||"https://hyperrushnet.github.io",cr=this.getAttribute("credits")!=="false";s.querySelector("#st").onclick=e=>{e.stopPropagation();sw.classList.toggle("active")&&si.focus()};s.querySelector("#gc").onclick=()=>{ov.classList.remove("active");mw.classList.remove("lock");pc.innerHTML=""};const rl=list=>{gg.innerHTML=list.map(g=>`<div class="c" data-id="${g.number}"><h3 class="ct">${g.name}</h3><span class="cn">#${String(g.number).padStart(2,"0")}</span></div>`).join("");gg.querySelectorAll(".c").forEach(el=>{el.onclick=()=>{pc.innerHTML=`<hrn-game nr="${el.dataset.id}" provider="${pv}" credits="${cr}"></hrn-game>`;ov.classList.add("active");mw.classList.add("lock");mw.scrollTo({top:0,behavior:"smooth"})}})};const data=await w.hrn.db.all();rl(data);si.oninput=async()=>{const res=await w.hrn.db.search(si.value);rl(res)}}}customElements.define("hrn-game-portal",P);class G extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){this.o=new IntersectionObserver(e=>{if(e[0].isIntersecting){this.l();this.o.disconnect()}});this.o.observe(this)}async l(){const nr=this.getAttribute("nr"),pr=this.getAttribute("provider")||"https://hyperrushnet.github.io",cr=this.getAttribute("credits")!=="false",rb=this.getAttribute("redirectblock")!=="false",data=await fDb(),g=data.find(i=>+i.number===+nr),url=g?.link?pr+g.link:pr+"/games-1/bacon-may-die/";this.shadowRoot.innerHTML=`<style>.m{position:relative;background:#000;overflow:hidden;font-family:sans-serif;width:100%;height:100%}.f{width:100%;height:100%;border:none;display:block;opacity:0;transition:opacity .9s;z-index:1}.f.o{opacity:1}.l{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#000;z-index:99;gap:20px;transition:opacity .6s}.p{width:64px;height:64px;border:4px solid rgba(255,255,255,0.1);border-top-color:#4169E1;border-right-color:#4169E1;border-radius:50%;animation:s 1.2s linear infinite}.t{color:#fff;font-size:14px;opacity:.7;letter-spacing:1px;text-transform:uppercase;font-weight:700}@keyframes s{to{transform:rotate(360deg)}}.c{position:absolute;bottom:12px;right:16px;z-index:100;font-size:11px;color:#999;background:#000d;padding:4px 10px;border-radius:5px;text-transform:uppercase;animation:f 8s forwards;border:1px solid #333}.c a{color:#4169E1;text-decoration:none;font-weight:700}@keyframes f{0%,85%{opacity:1}100%{opacity:0;visibility:hidden}}</style><div class="m"><div class="l"><div class="p"></div><div class="t">Loading...</div></div>${cr?'<div class="c">Powered by <a href="https://hyperrushnet.github.io/" target="_blank">HyperRush</a></div>':""}<iframe class="f" allow="autoplay;fullscreen;gamepad"></iframe></div>`;const f=this.shadowRoot.querySelector("iframe");f.sandbox=`allow-scripts allow-same-origin allow-pointer-lock allow-forms ${rb?"":"allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"}`;f.src=url;f.onload=()=>{f.classList.add("o");const ld=this.shadowRoot.querySelector(".l");if(ld){ld.style.opacity=0;setTimeout(()=>ld.remove(),600)}this.dispatchEvent(new CustomEvent("game:ready",{detail:{id:nr},bubbles:1,composed:1}))}}}customElements.define("hrn-game",G)})(window);
